{% extends "myfinances/base.html" %} {% load static %} {% block content %}

<div class="container-fluid alert-secondary p-3">
  <div class="container">
    <div class="row">
      <div class="col-12">
        <h1 class="display-4 ml-2">Bank Transactions Upload</h1>

        <!-- ✅ Messages block -->
        {% if messages %}
        <div class="mt-3">
          {% for message in messages %}
          <div
            class="alert alert-{{ message.tags }} alert-dismissible fade show"
            role="alert"
          >
            {{ message|safe }}
            <button
              type="button"
              class="close"
              data-dismiss="alert"
              aria-label="Close"
            >
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          {% endfor %}
        </div>
        {% endif %}
      </div>
    </div>

    <div class="row">
      <div class="col-12 ml-2">
        <span class="order">{{ order }}</span>
        <form
          class="form-inline"
          action=""
          method="POST"
          enctype="multipart/form-data"
        >
          {% csrf_token %}
          <div class="form-group mb-2 mr-4">
            <!-- ✅ File upload -->
            <input
              class="form-control-file"
              type="file"
              id="file1"
              name="file"
              required
            />
          </div>

          <div class="form-group mb-2 mr-4">
            <!-- ✅ Account last 4 digits -->
            <input
              type="text"
              class="form-control"
              id="acct_last4"
              name="acct_last4"
              maxlength="4"
              pattern="\d{4}"
              placeholder="Acct Last 4"
              required
            />
          </div>

          <button
            id="btnCategorize"
            class="btn btn-secondary mb-2 mt-2"
            type="submit"
          >
            Upload Bank Transactions
          </button>
        </form>
      </div>
    </div>
  </div>
</div>

{% endblock %}
